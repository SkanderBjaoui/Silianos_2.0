<nav
  [class]="'fixed w-full z-50 transition-all duration-500 ' + (scrolled ? 'bg-slate-900/80 backdrop-blur-xl shadow-lg border-b border-slate-800/60' : 'bg-transparent')"
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-20">
      <!-- Logo -->
      <a routerLink="/" class="flex items-center space-x-3 group cursor-pointer">
        <img
          src="assets/logo.png"
          alt="Silianos Voyage"
          [class]="'h-12 w-12 object-contain rounded-lg group-hover:scale-110 transition-all duration-300 ' + (scrolled ? 'brightness-100' : 'brightness-100')"
        />
        <span [class]="'text-2xl font-premium font-bold transition-colors duration-500 ' + (scrolled ? 'text-slate-100' : 'text-white')">
          Silianos
        </span>
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center space-x-1">
        @for (item of navItems; track $index) {
          @if (isDropdown(item)) {
            <div 
              class="relative group dropdown-container"
              (mouseenter)="openDropdown(item.label)"
              (mouseleave)="closeDropdown(item.label)"
            >
              <a
                [routerLink]="item.href"
                class="dropdown-button inline-flex items-center"
                [class]="'px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 hover:scale-105 relative gap-1 ' + (scrolled ? 'text-slate-200 hover:text-cyan-300' : 'text-white hover:text-cyan-300')"
              >
                {{ item.label }}
                <lucide-icon 
                  [name]="chevronDownIcon" 
                  [class]="'w-4 h-4 transition-transform duration-300 ' + (isDropdownOpen(item.label) ? 'rotate-180' : '')"
                ></lucide-icon>
                <div class="absolute bottom-0 left-0 h-1 w-0 group-hover:w-full bg-gradient-to-r from-blue-500 to-emerald-500 rounded-full transition-all duration-300"></div>
              </a>
              
              @if (isDropdownOpen(item.label)) {
                <div 
                  class="absolute top-full left-0 w-56 z-50 pt-2"
                  (mouseenter)="openDropdown(item.label)"
                  (mouseleave)="closeDropdown(item.label)"
                >
                  <div class="bg-slate-900/95 backdrop-blur-xl rounded-xl shadow-2xl border border-slate-800 overflow-hidden animate-slide-down">
                    <div class="py-2">
                      @for (link of item.links; track link.label) {
                        <a
                          [routerLink]="link.href"
                          [fragment]="link.anchor ? link.anchor.replace('#', '') : undefined"
                          (click)="handleNavClick(link, $event)"
                          class="block px-4 py-2 text-sm text-slate-300 hover:bg-slate-800 hover:text-cyan-300 transition-colors"
                        >
                          {{ link.label }}
                        </a>
                      }
                    </div>
                  </div>
                </div>
              }
            </div>
          } @else if (isLink(item)) {
            @if (item.anchor) {
              <a
                [routerLink]="item.href"
                [fragment]="item.anchor.replace('#', '')"
                (click)="handleNavClick(item, $event)"
                [class]="'px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 hover:scale-105 relative group ' + (scrolled ? 'text-slate-200 hover:text-cyan-300' : 'text-white hover:text-cyan-300')"
              >
                {{ item.label }}
                <div class="absolute bottom-0 left-0 h-1 w-0 group-hover:w-full bg-gradient-to-r from-blue-500 to-emerald-500 rounded-full transition-all duration-300"></div>
              </a>
            } @else {
              <a
                [routerLink]="item.href"
                [class]="'px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 hover:scale-105 relative group ' + (scrolled ? 'text-slate-200 hover:text-cyan-300' : 'text-white hover:text-cyan-300')"
              >
                {{ item.label }}
                <div class="absolute bottom-0 left-0 h-1 w-0 group-hover:w-full bg-gradient-to-r from-blue-500 to-emerald-500 rounded-full transition-all duration-300"></div>
              </a>
            }
          }
        }
      </div>

      <!-- Mobile Menu Button -->
      <button
        (click)="toggleMenu()"
        [class]="'md:hidden p-2 rounded-lg hover:bg-white/10 transition-colors ' + (scrolled ? 'text-slate-100' : 'text-white')"
      >
        @if (isOpen) {
          <lucide-icon [name]="xIcon" class="w-6 h-6"></lucide-icon>
        } @else {
          <lucide-icon [name]="menuIcon" class="w-6 h-6"></lucide-icon>
        }
      </button>
    </div>
  </div>

  <!-- Mobile Navigation -->
  @if (isOpen) {
    <div class="md:hidden bg-slate-900/90 backdrop-blur-xl border-t border-slate-800/60 animate-slide-down max-h-[calc(100vh-5rem)] overflow-y-auto">
      <div class="px-4 py-6 space-y-2">
        @for (item of navItems; track $index) {
          @if (isDropdown(item)) {
            <div>
              <div class="flex items-center">
                <a
                  [routerLink]="item.href"
                  (click)="isOpen = false"
                  class="flex-1 px-4 py-3 rounded-lg text-slate-200 hover:bg-gradient-to-r hover:from-slate-800 hover:to-slate-700 hover:text-cyan-300 transition-all font-medium"
                >
                  {{ item.label }}
                </a>
                <button
                  (click)="toggleDropdown(item.label, $event)"
                  class="px-2 py-3 rounded-lg text-slate-200 hover:bg-gradient-to-r hover:from-slate-800 hover:to-slate-700 hover:text-cyan-300 transition-all"
                >
                  <lucide-icon 
                    [name]="chevronDownIcon" 
                    [class]="'w-4 h-4 transition-transform duration-300 ' + (isDropdownOpen(item.label) ? 'rotate-180' : '')"
                  ></lucide-icon>
                </button>
              </div>
              
              @if (isDropdownOpen(item.label)) {
                <div class="pl-4 pr-2 py-2 space-y-1">
                  @for (link of item.links; track link.label) {
                    <a
                      [routerLink]="link.href"
                      [fragment]="link.anchor ? link.anchor.replace('#', '') : undefined"
                      (click)="handleNavClick(link, $event)"
                      class="block px-4 py-2 rounded-lg text-sm text-slate-300 hover:bg-slate-800 hover:text-cyan-300 transition-colors"
                    >
                      {{ link.label }}
                    </a>
                  }
                </div>
              }
            </div>
          } @else if (isLink(item)) {
            @if (item.anchor) {
              <a
                [routerLink]="item.href"
                [fragment]="item.anchor.replace('#', '')"
                (click)="handleNavClick(item, $event)"
                class="block px-4 py-3 rounded-lg text-slate-200 hover:bg-gradient-to-r hover:from-slate-800 hover:to-slate-700 hover:text-cyan-300 transition-all font-medium"
              >
                {{ item.label }}
              </a>
            } @else {
              <a
                [routerLink]="item.href"
                (click)="isOpen = false"
                class="block px-4 py-3 rounded-lg text-slate-200 hover:bg-gradient-to-r hover:from-slate-800 hover:to-slate-700 hover:text-cyan-300 transition-all font-medium"
              >
                {{ item.label }}
              </a>
            }
          }
        }
      </div>
    </div>
  }
</nav>
